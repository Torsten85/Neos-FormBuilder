'Neos.Neos:ContentCollection':
  constraints:
    nodeTypes:
      'ByTorsten.FormBuilder:Element': FALSE

'ByTorsten.FormBuilder:Plugin':
  superTypes:
    'Neos.Neos:Plugin': true
  ui:
    label: 'Form Builder'
    group: 'plugins'
    icon: 'icon-envelope-alt'
    inlineEditable: true
    inspector:
      tabs:
        finishers:
          label: Finishers
          icon: icon-level-down
      groups:
        layout:
          label: layout
        dispatch:
          label: Dispatch
        mail:
          label: Mail content
  childNodes:
    elements:
      type: 'Neos.Neos:ContentCollection'
      constraints:
        nodeTypes:
          'ByTorsten.FormBuilder:Element': true
          '*': false

'ByTorsten.FormBuilder:Element':
  abstract: true
  superTypes:
    'Neos.Neos:Content': true

'ByTorsten.FormBuilder:FormElement':
  abstract: true
  superTypes:
    'ByTorsten.FormBuilder:Element': true
  options:
    form:
      targetType: 'string'
  ui:
    icon: 'icon-edit-sign'
    group: formfields
    inspector:
      groups:
        options:
          label: Form Options

'ByTorsten.FormBuilder:LabelMixin':
  abstract: true
  properties:
    label:
      type: string
      ui:
        label: Label
        inlineEditable: TRUE
        aloha:
          placeholder: Your label
          format: []
          table: []
          link: []
          list: []
          alignment: []
          formatlesspaste:
            button: false
            formatlessPasteOption: true
          autoparagraph: false
    internalLabel:
      type: string
      ui:
        label: Internal label
        help:
          message: 'Used as label for finishers'
        inspector:
          group: 'options'

'ByTorsten.FormBuilder:RequiredMixin':
  abstract: true
  properties:
    required:
      type: boolean
      ui:
        label: Required
        reloadIfChanged: TRUE
        inspector:
          group: options


'ByTorsten.FormBuilder:PlaceholderMixin':
  abstract: true
  properties:
    placeholder:
      type: string
      ui:
        label: Placeholder
        reloadIfChanged: true
        inspector:
          group: options

'ByTorsten.FormBuilder:Submit':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
  label: ${'Submit (' + String.crop(String.stripTags(q(node).property('title')), 15, '…') + ')'}
  ui:
    label: Submit
    inlineEditable: true
  properties:
    title:
      type: string
      defaultValue: 'Submit'
      ui:
        label: Title
        reloadIfChanged: true
        inspector:
          group: options

'ByTorsten.FormBuilder:Text':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
    'ByTorsten.FormBuilder:RequiredMixin': true
    'ByTorsten.FormBuilder:LabelMixin': true
    'ByTorsten.FormBuilder:PlaceholderMixin': true
  label: ${'Textfield (' + String.crop(String.stripTags(q(node).property('label')), 15, '…') + ')'}
  ui:
    label: Textfield

'ByTorsten.FormBuilder:Number':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
    'ByTorsten.FormBuilder:RequiredMixin': true
    'ByTorsten.FormBuilder:LabelMixin': true
    'ByTorsten.FormBuilder:PlaceholderMixin': true
  label: ${'Numberfield (' + String.crop(String.stripTags(q(node).property('label')), 15, '…') + ')'}
  ui:
    label: Numberfield
  options:
    form:
      targetType: 'float'

'ByTorsten.FormBuilder:Email':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
    'ByTorsten.FormBuilder:RequiredMixin': true
    'ByTorsten.FormBuilder:LabelMixin': true
    'ByTorsten.FormBuilder:PlaceholderMixin': true
  label: ${'Email(' + String.crop(String.stripTags(q(node).property('label')), 15, '…') + ')'}
  ui:
    label: Email address
  options:
    form:
      validator: 'ByTorsten\FormBuilder\Validation\Validator\EmailValidator'

'ByTorsten.FormBuilder:Textarea':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
    'ByTorsten.FormBuilder:RequiredMixin': true
    'ByTorsten.FormBuilder:LabelMixin': true
    'ByTorsten.FormBuilder:PlaceholderMixin': true
  label: ${'Textarea (' + String.crop(String.stripTags(q(node).property('label')), 15, '…') + ')'}
  ui:
    label: Textarea

'ByTorsten.FormBuilder:Checkbox':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
    'ByTorsten.FormBuilder:RequiredMixin': true
    'ByTorsten.FormBuilder:LabelMixin': true
  label: ${'Checkbox (' + String.crop(String.stripTags(q(node).property('label')), 15, '…') + ')'}
  ui:
    label: Checkbox

#'ByTorsten.FormBuilder:Select':
#  superTypes:
#    'ByTorsten.FormBuilder:FormElement': true
#    'ByTorsten.FormBuilder:RequiredMixin': true
#    'ByTorsten.FormBuilder:LabelMixin': true
#    'ByTorsten.FormBuilder:PlaceholderMixin': true
#  label: ${'Select (' + String.crop(String.stripTags(q(node).property('label')), 15, '…') + ')'}
#  ui:
#    label: Select
#  properties:
#    options:
#      type: array
#      ui:
#        label: 'Options'
#        reloadIfChanged: TRUE
#        inspector:
#          group: options
#          editor: 'ByTorsten.Editors/TagEditor'
#          editorOptions:
#            icon: 'icon-tag'
#            placeholder: 'Option name'
#      validation:
#        'ByTorsten.Editors/CountValidator':
#          minimum: 1
#  options:
#    form:
#     value: ${q(node).property('options')[value]}
#
#'ByTorsten.FormBuilder:MultiSelect':
#  superTypes:
#    'ByTorsten.FormBuilder:Select': TRUE
#  label: ${'MultiSelect (' + String.crop(q(node).property('label'), 15, '…') + ')'}
#  ui:
#    label: Multiple Select
#  options:
#    form:
#     targetType: array<string>
#     processor: ByTorsten\FormBuilder\Processor\MultiSelectProcessor
#     value: ~

'ByTorsten.FormBuilder:Recaptcha':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
  ui:
    label: reCAPTCHA
    inlineEditable: false
  properties:
    theme:
      type: string
      ui:
        label: 'Theme'
        reloadIfChanged: TRUE
        inspector:
          group: options
          editor:  Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              light:
                label: Light
              dark:
                label: Dark
    sitekey:
      type: string
      ui:
        label: 'Site key'
        reloadIfChanged: TRUE
        inspector:
          group: options
    secretkey:
      type: string
      ui:
        label: 'Secret key'
        reloadIfChanged: TRUE
        inspector:
          group: options
  options:
    form:
      validator: 'ByTorsten\FormBuilder\Validation\Validator\RecaptchaValidator'
      value: "${false}"

'ByTorsten.FormBuilder:Upload':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
    'ByTorsten.FormBuilder:RequiredMixin': true
    'ByTorsten.FormBuilder:LabelMixin': true
  label: ${'Upload (' + String.crop(String.stripTags(q(node).property('label')), 15, '…') + ')'}
  options:
    form:
      targetType: Neos\Flow\ResourceManagement\PersistentResource
      processor: ByTorsten\FormBuilder\Processor\UploadProcessor
  ui:
    label: Upload
    inlineEditable: false

'ByTorsten.FormBuilder:Uploads':
  superTypes:
    'ByTorsten.FormBuilder:FormElement': true
    'ByTorsten.FormBuilder:RequiredMixin': true
    'ByTorsten.FormBuilder:LabelMixin': true
  label: ${'Uploads (' + String.crop(String.stripTags(q(node).property('label')), 15, '…') + ')'}
  options:
    form:
      targetType: array<Neos\Flow\ResourceManagement\PersistentResource>
      processor: ByTorsten\FormBuilder\Processor\UploadProcessor
  ui:
    label: Uploads
    inlineEditable: false